!function(){"use strict";const e=e=>{let t=e;return{get:()=>t,set:e=>{t=e}}};var t=tinymce.util.Tools.resolve("tinymce.PluginManager");const n=e=>({isFullscreen:()=>null!==e.get()}),o=e=>t=>(e=>{const t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&(n=r=e,o=(s=String).prototype,o.isPrototypeOf(n)||(null===(i=r.constructor)||void 0===i?void 0:i.name)===s.name)?"string":t;var n,o;var r,s,i})(t)===e,r=e=>t=>typeof t===e,s=e=>t=>e===t,i=o("string"),l=o("object"),a=o("array"),c=s(null),u=r("boolean"),m=s(void 0),d=e=>!(e=>null==e)(e),h=r("function"),f=r("number"),g=()=>{},p=e=>()=>e;function v(e,...t){return(...n)=>{const o=t.concat(n);return e.apply(null,o)}}const w=p(!1),y=p(!0);class b{constructor(e,t){this.tag=e,this.value=t}static some(e){return new b(!0,e)}static none(){return b.singletonNone}fold(e,t){return this.tag?t(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?b.some(e(this.value)):b.none()}bind(e){return this.tag?e(this.value):b.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:b.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return d(e)?b.some(e):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const S=Array.prototype.push,x=(e,t)=>{const n=e.length,o=new Array(n);for(let r=0;r<n;r++){const n=e[r];o[r]=t(n,r)}return o},E=(e,t)=>{for(let n=0,o=e.length;n<o;n++){t(e[n],n)}},F=(e,t)=>{const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o];t(r,o)&&n.push(r)}return n},T=(e,t)=>((e,t,n)=>{for(let o=0,r=e.length;o<r;o++){const r=e[o];if(t(r,o))return b.some(r);if(n(r,o))break}return b.none()})(e,t,w),k=(e,t)=>(e=>{const t=[];for(let n=0,o=e.length;n<o;++n){if(!a(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);S.apply(t,e[n])}return t})(x(e,t)),O=e=>((e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none())(e,0),C=t=>{const n=e(b.none()),o=()=>n.get().each(t);return{clear:()=>{o(),n.set(b.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:e=>{o(),n.set(b.some(e))}}},D=()=>C((e=>e.unbind())),A=Object.keys,L="undefined"!=typeof window?window:Function("return this;")(),R=(e,t)=>((e,t)=>{let n=null!=t?t:L;for(let t=0;t<e.length&&null!=n;++t)n=n[e[t]];return n})(e.split("."),t),M=(e,t)=>{const n=((e,t)=>R(e,t))(e,t);if(null==n)throw new Error(e+" not available on this browser");return n},P=Object.getPrototypeOf,N=e=>{const t=R("ownerDocument.defaultView",e);return l(e)&&((e=>M("HTMLElement",e))(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(P(e).constructor.name))},H=e=>t=>(e=>e.dom.nodeType)(t)===e,V=H(1),W=H(3),q=H(11),B=(e,t,n)=>{((e,t,n)=>{if(!(i(n)||u(n)||f(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")})(e.dom,t,n)},I=(e,t)=>{const n=e.dom.getAttribute(t);return null===n?void 0:n},j=(e,t)=>{e.dom.removeAttribute(t)},_=(e,t,n=0,o)=>{const r=e.indexOf(t,n);return-1!==r&&(!!m(o)||r+t.length<=o)},z=e=>void 0!==e.style&&h(e.style.getPropertyValue),K=e=>{if(null==e)throw new Error("Node cannot be null or undefined");return{dom:e}},$={fromHtml:(e,t)=>{const n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){const t="HTML does not have a single root node";throw console.error(t,e),new Error(t)}return K(n.childNodes[0])},fromTag:(e,t)=>{const n=(t||document).createElement(e);return K(n)},fromText:(e,t)=>{const n=(t||document).createTextNode(e);return K(n)},fromDom:K,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(K)},U=(e,t)=>{const n=e.dom;if(1!==n.nodeType)return!1;{const e=n;if(void 0!==e.matches)return e.matches(t);if(void 0!==e.msMatchesSelector)return e.msMatchesSelector(t);if(void 0!==e.webkitMatchesSelector)return e.webkitMatchesSelector(t);if(void 0!==e.mozMatchesSelector)return e.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},X=e=>$.fromDom(e.dom.ownerDocument),Y=e=>(e=>b.from(e.dom.parentNode).map($.fromDom))(e).map(G).map((t=>F(t,(t=>{return n=t,!(e.dom===n.dom);var n})))).getOr([]),G=e=>x(e.dom.childNodes,$.fromDom),J=e=>{const t=(e=>$.fromDom(e.dom.getRootNode()))(e);return q(n=t)&&d(n.dom.host)?b.some(t):b.none();var n},Q=e=>$.fromDom(e.dom.host),Z=e=>d(e.dom.shadowRoot),ee=e=>{const t=W(e)?e.dom.parentNode:e.dom;if(null==t||null===t.ownerDocument)return!1;const n=t.ownerDocument;return J($.fromDom(t)).fold((()=>n.body.contains(t)),(o=ee,r=Q,e=>o(r(e))));var o,r},te=(e,t,n)=>{if(!i(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);z(e)&&e.style.setProperty(t,n)},ne=(e,t,n)=>{const o=e.dom;te(o,t,n)},oe=(e,t)=>{const n=e.dom;((e,t)=>{const n=A(e);for(let o=0,r=n.length;o<r;o++){const r=n[o];t(e[r],r)}})(t,((e,t)=>{te(n,t,e)}))},re=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||ee(e)?o:se(n,t)},se=(e,t)=>z(e)?e.style.getPropertyValue(t):"",ie=e=>{const t=$.fromDom((e=>{if(d(e.target)){const t=$.fromDom(e.target);if(V(t)&&Z(t)&&e.composed&&e.composedPath){const t=e.composedPath();if(t)return O(t)}}return b.from(e.target)})(e).getOr(e.target)),n=()=>e.stopPropagation(),o=()=>e.preventDefault(),r=(s=o,i=n,(...e)=>s(i.apply(null,e)));var s,i;return((e,t,n,o,r,s,i)=>({target:e,x:t,y:n,stop:o,prevent:r,kill:s,raw:i}))(t,e.clientX,e.clientY,n,o,r,e)},le=(e,t,n,o,r)=>{const s=((e,t)=>n=>{e(n)&&t(ie(n))})(n,o);return e.dom.addEventListener(t,s,r),{unbind:v(ae,e,t,s,r)}},ae=(e,t,n,o)=>{e.dom.removeEventListener(t,n,o)},ce=y,ue=(e,t,n)=>((e,t,n,o)=>le(e,t,n,o,!1))(e,t,ce,n),me=()=>de(0,0),de=(e,t)=>({major:e,minor:t}),he={nu:de,detect:(e,t)=>{const n=String(t).toLowerCase();return 0===e.length?me():((e,t)=>{const n=((e,t)=>{for(let n=0;n<e.length;n++){const o=e[n];if(o.test(t))return o}})(e,t);if(!n)return{major:0,minor:0};const o=e=>Number(t.replace(n,"$"+e));return de(o(1),o(2))})(e,n)},unknown:me},fe=(e,t)=>((e,t)=>{for(let n=0;n<e.length;n++){const o=t(e[n],n);if(o.isSome())return o}return b.none()})(t.brands,(t=>{const n=t.brand.toLowerCase();return T(e,(e=>{var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((e=>({current:e.name,version:he.nu(parseInt(t.version,10),0)})))})),ge=(e,t)=>{const n=String(t).toLowerCase();return T(e,(e=>e.search(n)))},pe=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ve=e=>t=>_(t,e),we=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>_(e,"edge/")&&_(e,"chrome")&&_(e,"safari")&&_(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,pe],search:e=>_(e,"chrome")&&!_(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>_(e,"msie")||_(e,"trident")},{name:"Opera",versionRegexes:[pe,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ve("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ve("firefox")},{name:"Safari",versionRegexes:[pe,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(_(e,"safari")||_(e,"mobile/"))&&_(e,"applewebkit")}],ye=[{name:"Windows",search:ve("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>_(e,"iphone")||_(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ve("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:ve("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ve("linux"),versionRegexes:[]},{name:"Solaris",search:ve("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ve("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:ve("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],be={browsers:p(we),oses:p(ye)},Se="Edge",xe="Chromium",Ee="Opera",Fe="Firefox",Te="Safari",ke=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isEdge:o(Se),isChromium:o(xe),isIE:o("IE"),isOpera:o(Ee),isFirefox:o(Fe),isSafari:o(Te)}},Oe={unknown:()=>ke({current:void 0,version:he.unknown()}),nu:ke,edge:p(Se),chromium:p(xe),ie:p("IE"),opera:p(Ee),firefox:p(Fe),safari:p(Te)},Ce="Windows",De="Android",Ae="Linux",Le="macOS",Re="Solaris",Me="FreeBSD",Pe="ChromeOS",Ne=e=>{const t=e.current,n=e.version,o=e=>()=>t===e;return{current:t,version:n,isWindows:o(Ce),isiOS:o("iOS"),isAndroid:o(De),isMacOS:o(Le),isLinux:o(Ae),isSolaris:o(Re),isFreeBSD:o(Me),isChromeOS:o(Pe)}},He={unknown:()=>Ne({current:void 0,version:he.unknown()}),nu:Ne,windows:p(Ce),ios:p("iOS"),android:p(De),linux:p(Ae),macos:p(Le),solaris:p(Re),freebsd:p(Me),chromeos:p(Pe)},Ve=(e,t,n)=>{const o=be.browsers(),r=be.oses(),s=t.bind((e=>fe(o,e))).orThunk((()=>((e,t)=>ge(e,t).map((e=>{const n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(o,e))).fold(Oe.unknown,Oe.nu),i=((e,t)=>ge(e,t).map((e=>{const n=he.detect(e.versionRegexes,t);return{current:e.name,version:n}})))(r,e).fold(He.unknown,He.nu),l=((e,t,n,o)=>{const r=e.isiOS()&&!0===/ipad/i.test(n),s=e.isiOS()&&!r,i=e.isiOS()||e.isAndroid(),l=i||o("(pointer:coarse)"),a=r||!s&&i&&o("(min-device-width:768px)"),c=s||i&&!a,u=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),m=!c&&!a&&!u;return{isiPad:p(r),isiPhone:p(s),isTablet:p(a),isPhone:p(c),isTouch:p(l),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:p(u),isDesktop:p(m)}})(i,s,e,n);return{browser:s,os:i,deviceType:l}},We=e=>window.matchMedia(e).matches;let qe=(e=>{let t,n=!1;return(...o)=>(n||(n=!0,t=e.apply(null,o)),t)})((()=>Ve(window.navigator.userAgent,b.from(window.navigator.userAgentData),We)));const Be=(e,t)=>({left:e,top:t,translate:(n,o)=>Be(e+n,t+o)}),Ie=Be,je=e=>{const t=void 0===e?window:e;return qe().browser.isFirefox()?b.none():b.from(t.visualViewport)},_e=(e,t,n,o)=>({x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}),ze=e=>{const t=void 0===e?window:e,n=t.document,o=(e=>{const t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Ie(n,o)})($.fromDom(n));return je(t).fold((()=>{const e=t.document.documentElement,n=e.clientWidth,r=e.clientHeight;return _e(o.left,o.top,n,r)}),(e=>_e(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)))},Ke=(e,t,n)=>je(n).map((n=>{const o=e=>t(ie(e));return n.addEventListener(e,o),{unbind:()=>n.removeEventListener(e,o)}})).getOrThunk((()=>({unbind:g})));var $e=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ue=tinymce.util.Tools.resolve("tinymce.Env");const Xe=(e,t)=>{e.dispatch("FullscreenStateChanged",{state:t}),e.dispatch("ResizeEditor")},Ye=(Ge="fullscreen_native",e=>e.options.get(Ge));var Ge;const Je=e=>{const t=$.fromDom(e.getElement());return J(t).map(Q).getOrThunk((()=>(e=>{const t=e.dom.body;if(null==t)throw new Error("Body is not available yet");return $.fromDom(t)})(X(t))))},Qe=e=>{return e.dom===(void 0!==(t=X(e).dom).fullscreenElement?t.fullscreenElement:void 0!==t.msFullscreenElement?t.msFullscreenElement:void 0!==t.webkitFullscreenElement?t.webkitFullscreenElement:null);var t},Ze=(e,t,n)=>F(((e,t)=>{const n=h(t)?t:w;let o=e.dom;const r=[];for(;null!==o.parentNode&&void 0!==o.parentNode;){const e=o.parentNode,t=$.fromDom(e);if(r.push(t),!0===n(t))break;o=e}return r})(e,n),t),et=e=>((e,t)=>{const n=void 0===t?document:t.dom;return 1!==(o=n).nodeType&&9!==o.nodeType&&11!==o.nodeType||0===o.childElementCount?[]:x(n.querySelectorAll(e),$.fromDom);var o})(e),tt=(e,t,n)=>Ze(e,(e=>U(e,t)),n),nt=(e,t)=>((e,t)=>F(Y(e),t))(e,(e=>U(e,t))),ot="data-ephox-mobile-fullscreen-style",rt="position:absolute!important;",st="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",it=Ue.os.isAndroid(),lt=(e,t,n)=>{const o=t=>n=>{const o=I(n,"style"),r=void 0===o?"no-styles":o.trim();r!==t&&(B(n,ot,r),oe(n,e.parseStyle(t)))},r=tt(t,"*"),s=k(r,(e=>nt(e,"*:not(.tox-silver-sink)"))),i=(e=>{const t=re(e,"background-color");return void 0!==t&&""!==t?"background-color:"+t+"!important":"background-color:rgb(255,255,255)!important;"})(n);E(s,o("display:none!important;")),E(r,o(rt+st+i));o((!0===it?"":rt)+st+i)(t)},at=$e.DOM,ct=je().fold((()=>({bind:g,unbind:g})),(e=>{const t=(()=>{const e=C(g);return{...e,on:t=>e.get().each(t)}})(),n=D(),o=D(),r=((e,t)=>{let n=null;return{cancel:()=>{c(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{c(n)&&(n=setTimeout((()=>{n=null,e.apply(null,o)}),t))}}})((()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0,window.requestAnimationFrame((()=>{t.on((t=>oe(t,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})))}))}),50);return{bind:e=>{t.set(e),r.throttle(),n.set(Ke("resize",r.throttle)),o.set(Ke("scroll",r.throttle))},unbind:()=>{t.on((()=>{n.clear(),o.clear()})),t.clear()}}})),ut=(e,t)=>{const n=document.body,o=document.documentElement,r=e.getContainer(),s=$.fromDom(r),i=(l=s,b.from(l.dom.nextSibling).map($.fromDom)).filter((e=>(e=>V(e)&&N(e.dom))(e)&&((e,t)=>(e=>void 0!==e.dom.classList)(e)&&e.dom.classList.contains(t))(e,"tox-silver-sink")));var l;const a=Je(e),c=t.get(),u=$.fromDom(e.getBody()),m=Ue.deviceType.isTouch(),d=r.style,h=e.iframeElement,f=null==h?void 0:h.style,g=e=>{e(n,"tox-fullscreen"),e(o,"tox-fullscreen"),e(r,"tox-fullscreen"),J(s).map((e=>Q(e).dom)).each((t=>{e(t,"tox-fullscreen"),e(t,"tox-shadowhost")}))},p=()=>{m&&(e=>{const t=et("["+ot+"]");E(t,(t=>{const n=I(t,ot);n&&"no-styles"!==n?oe(t,e.parseStyle(n)):j(t,"style"),j(t,ot)}))})(e.dom),g(at.removeClass),ct.unbind(),b.from(t.get()).each((e=>e.fullscreenChangeHandler.unbind()))};if(c)c.fullscreenChangeHandler.unbind(),Ye(e)&&Qe(a)&&(e=>{const t=e.dom;t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.webkitCancelFullScreen&&t.webkitCancelFullScreen()})(X(a)),f.width=c.iframeWidth,f.height=c.iframeHeight,d.width=c.containerWidth,d.height=c.containerHeight,d.top=c.containerTop,d.left=c.containerLeft,w=i,y=c.sinkCssPosition,S=(e,t)=>{ne(e,"position",t)},w.isSome()&&y.isSome()?b.some(S(w.getOrDie(),y.getOrDie())):b.none(),p(),v=c.scrollPos,window.scrollTo(v.x,v.y),t.set(null),Xe(e,!1),e.off("remove",p);else{const n=ue(X(a),void 0!==document.fullscreenElement?"fullscreenchange":void 0!==document.msFullscreenElement?"MSFullscreenChange":void 0!==document.webkitFullscreenElement?"webkitfullscreenchange":"fullscreenchange",(n=>{Ye(e)&&(Qe(a)||null===t.get()||ut(e,t))})),o={scrollPos:ze(window),containerWidth:d.width,containerHeight:d.height,containerTop:d.top,containerLeft:d.left,iframeWidth:f.width,iframeHeight:f.height,fullscreenChangeHandler:n,sinkCssPosition:i.map((e=>re(e,"position")))};m&&lt(e.dom,s,u),f.width=f.height="100%",d.width=d.height="",g(at.addClass),i.each((e=>{ne(e,"position","fixed")})),ct.bind(s),e.on("remove",p),t.set(o),Ye(e)&&(e=>{const t=e.dom;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.webkitRequestFullScreen&&t.webkitRequestFullScreen()})(a),Xe(e,!0)}var v,w,y,S};var mt=tinymce.util.Tools.resolve("tinymce.util.VK");const dt=(e,t)=>n=>{n.setActive(null!==t.get());const o=e=>n.setActive(e.state);return e.on("FullscreenStateChanged",o),()=>e.off("FullscreenStateChanged",o)};t.add("fullscreen",(t=>{const o=e(null);return t.inline||((e=>{(0,e.options.register)("fullscreen_native",{processor:"boolean",default:!1})})(t),((e,t)=>{e.addCommand("mceFullScreen",(()=>{ut(e,t)}))})(t,o),((e,t)=>{const n=()=>e.execCommand("mceFullScreen");e.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:n,onSetup:dt(e,t),context:"any"}),e.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:n,onSetup:dt(e,t),shortcut:"Meta+Shift+F",context:"any"})})(t,o),((e,t)=>{e.on("init",(()=>{e.on("keydown",(e=>{e.keyCode!==mt.TAB||e.metaKey||e.ctrlKey||!t.get()||e.preventDefault()}))}))})(t,o),t.addShortcut("Meta+Shift+F","","mceFullScreen")),n(o)}))}();